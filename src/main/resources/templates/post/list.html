<!DOCTYPE html>
<html lang="ko"
 		xmlns:th="http://www.thymeleaf.org" 
 		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
 		layout:decorate="~{Layout/default}">
 		
 				<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
 		
 		<section layout:fragment="contents">
 			<div id="memoNote" class="contents-box">
 				<h1 class="text-center my-5 p-5">Memo List</h1>
				<table class="table text-center">
					<thead>
						<tr>	
							<th>
                                <label class="checkbox-inline">
                                <input type="checkbox" id="CheckBox">
                                </label>
                            </th>	
							<th>No</th>
							<th>제목</th>
							<th>날짜</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="memo:${list}">
						<td>
						 <label class="checkbox-inline"><input type="checkbox"></label>
                         </td>
							<td th:text="${memoid}">3</td>
							<td></td>
							<td></td>	
						</tr>	
					</tbody>
				</table>
				
				<div class="text-center my-3 p-3 d-flex justify-content-center">
				<button type="button" class="btn btn-dark mr-2"><a href="/post/create-view">작성</a></button>
				<button type="button" class="btn btn-dark mr-2"><a href="/post/update-view">수정</a></button>
				<button type="button" class="btn btn-dark mr-2" id="deleteBtn">삭제</button>
				
				</div>
			
		
				
 			</div>			
 		</section>
 		
 		<script layout:fragment="script">
 		
 		$(document).ready(function(){
				
				
				$("#deleteBtn").on("click", function() {
	    			
	    			let id = $("#memoNote").data("post-id");
	    			
	    			$.ajax({
	    				type:"delete"
	    				, url:"/post/delete"
	    				, data:{"id":id}
	    				, success:function(response) {
	    					if(response.result == "success") {
	    						location.href = "/post/list-view";
	    					} else {
	    						alert("삭제 실패!");
	    					}
	    					
	    				}, 
	    				error:function() {
	    					alert("삭제 에러");
	    				}
	    			});
	    		});
				
				
				
				
				$("#saveBtn").on("click",function(){
					let title = $("#titleInput").val();
					let contents = $("#contentsInput").val();
					
					if(title == ""){
						alert("제목을 입력하세요!")
						return "";
					}
					if(contents == ""){
						alert("내용을 입력하세요!")
						return "";
					}
					
					$.ajax({
						type:"put"
						,url:"/post/update"
						,data:{"title":title,"contents":contents}
						,success:function(response){
							if(response.result=="success"){
								location.href="/post/list-view"
								alert("수정완료!!")
							}else{
								alert("수정실패!!")
							}
						}
						,error:function(){
							alert("수정에러!!")
						}
					});
					
				});
			});
		
 		
 		</script>
 		
 		
 </html>